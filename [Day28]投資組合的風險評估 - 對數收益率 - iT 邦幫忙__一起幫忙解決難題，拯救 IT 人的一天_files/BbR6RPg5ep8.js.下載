if (self.CavalryLogger) { CavalryLogger.start_js(["IWZZn"]); }

__d("PageTransitions",["requireCond","cr:917439"],(function(a,b,c,d,e,f){e.exports=b("cr:917439")}),null);
__d("BanzaiBase",["BanzaiAdapter","BanzaiConsts","BanzaiLazyQueue","ErrorUtils","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();var g="send_via_beacon_failure",h="categorized_ods",i=0,j=1,k=2,l=null,m,n=[],o=null,p=[];function q(a,b){a.__meta.status=i,a[3]=(a[3]||0)+1,!a.__meta.retry&&b>=400&&b<600&&n.push(a)}var r={adapter:b("BanzaiAdapter"),SEND:b("BanzaiConsts").SEND,OK:b("BanzaiConsts").OK,ERROR:b("BanzaiConsts").ERROR,SHUTDOWN:b("BanzaiConsts").SHUTDOWN,VITAL_WAIT:b("BanzaiConsts").VITAL_WAIT,BASIC_WAIT:b("BanzaiConsts").BASIC_WAIT,VITAL:{delay:b("BanzaiAdapter").config.MIN_WAIT||b("BanzaiConsts").VITAL_WAIT},BASIC:{delay:b("BanzaiAdapter").config.MAX_WAIT||b("BanzaiConsts").BASIC_WAIT},isEnabled:function(a){return Boolean(b("BanzaiAdapter").config.gks&&b("BanzaiAdapter").config.gks[a])},post:function(a,c,d){__p&&__p();a||b("FBLogger")("banzai").mustfix("Banzai.post called without specifying a route");var e=d==null?void 0:d.retry;if(b("BanzaiAdapter").config.disabled)return;var f=b("BanzaiAdapter").config.blacklist;if(f&&(f.indexOf&&(typeof f.indexOf=="function"&&f.indexOf(a)!=-1)))return;var g=r._wrapData(a,c,r._getEventTime(),e);(d==null?void 0:d.callback)&&(g.__meta.callback=d==null?void 0:d.callback);(d==null?void 0:d.compress)!=null&&(g.__meta.compress=d==null?void 0:d.compress);f=d==null?void 0:d.delay;f==null&&(f=b("BanzaiConsts").BASIC_WAIT);if(d==null?void 0:d.signal){g.__meta.status=j;c=[{user:r._getUserId(),page_id:r._getPageId(),posts:[g],trigger:a}];b("BanzaiAdapter").send(c,function(){g.__meta.status=k,g.__meta.callback&&g.__meta.callback()},function(a){q(g,a)},!0);if(!e)return}n.push(g);(r._schedule(f)||!o)&&(o=a);d=b("BanzaiLazyQueue").flushQueue();d.forEach(function(a){return r.post.apply(r,a)})},registerToSendWithBeacon:function(a,c,d,e){if(!(navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon()))return!1;if(!a){b("FBLogger")("banzai").mustfix("Banzai.registerToSendWithBeacon called without specifying a route");return!1}p.push({cb:c,route:a,onSuccess:d,onFailure:e});return!0},flush:function(b,c){a.clearTimeout(l),l=null,r._sendWithCallbacks(b,c)},subscribe:b("BanzaiAdapter").subscribe,canUseNavigatorBeacon:function(){return Boolean(navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon())},_canSend:function(a){return a[2]>=r._getEventTime()-(b("BanzaiAdapter").config.EXPIRY||b("BanzaiConsts").EXPIRY)},_getPostBuffer:function(){return n},_clearPostBuffer:function(){n=[]},_schedule:function(b){var c=r._getEventTime()+b;if(!m||c<m){m=c;l&&a.clearTimeout(l);l=a.setTimeout(function(){r._sendWithCallbacks()},b);return!0}return!1},_sendWithCallbacks:function(a,c,d){__p&&__p();m=null;r._schedule(r.BASIC.delay);if(!b("BanzaiAdapter").readyToSend()){c&&c();return}if(r.isEnabled("flush_storage_periodically")){var e=r._getStorage();b("ErrorUtils").applyWithGuard(e.flush,e)}b("BanzaiAdapter").inform(b("BanzaiConsts").SEND);e=[];var f=[];n=r._gatherWadsAndPostsFromBuffer(e,f,!0,n,d);if(e.length<=0){b("BanzaiAdapter").inform(b("BanzaiConsts").OK);a&&a();return}e[0].trigger=o;o=null;e[0].send_method="ajax";e.map(b("BanzaiAdapter").prepWadForTransit);b("BanzaiAdapter").send(e,function(){f.forEach(function(a){a.__meta.status=k,a.__meta.callback&&a.__meta.callback()}),a&&a()},function(a){f.forEach(function(b){q(b,a)}),c&&c()})},_gatherWadsAndPostsFromBuffer:function(a,b,c,d,e){__p&&__p();e===void 0&&(e=null);var f={},g=d.length,h=!1;return d.filter(function(d,i){__p&&__p();if(h)return!0;var l=d.__meta;if(l.status>=k||!r._canSend(d))return!1;if(l.status>=j)return!0;var m=l.compress!=null?l.compress:!0,n=l.pageID+l.userID+(m?"compress":""),o=f[n];o||(o={user:l.userID,page_id:l.pageID,posts:[],snappy:m},f[n]=o,a.push(o));l.status=j;o.posts.push(d);b.push(d);e!=null&&e>0&&(e--,e==0&&(h=!0,i<g-1&&r._schedule(0)));return c&&l.retry})},_resetPostStatus:function(a){a.__meta.status=i},_store:function(a){a=r._getStorage();b("ErrorUtils").applyWithGuard(a.store,a)},_restore:function(a){a=r._getStorage();b("ErrorUtils").applyWithGuard(a.restore,a);r._schedule(b("BanzaiAdapter").config.RESTORE_WAIT||b("BanzaiConsts").VITAL_WAIT)},_wrapData:function(a,b,c,d){a=[a,b,c,0];a.__meta={pageID:r._getPageId(),userID:r._getUserId(),retry:d===!0,status:i};return a},_tryToSendViaBeacon:function(){__p&&__p();if(!(navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon()))return!1;var c=[],d=[];n=r._gatherWadsAndPostsFromBuffer(c,d,!1,n);if(c.length<=0)return!1;c[0].send_method="beacon";c.map(b("BanzaiAdapter").prepWadForTransit);c=new Blob([b("BanzaiAdapter").addRequestAuthData(b("BanzaiAdapter").prepForTransit(c))],{type:"application/x-www-form-urlencoded"});c=a.navigator.sendBeacon(r.adapter.endpoint,c);if(!c){d.forEach(function(a){n.push(a)});n.push(r._wrapData(h,{2966:{banzai:(c={},c[g]=[1],c)}},r._getEventTime()));return!1}return!0},_processCallbacksAndSendViaBeacon:function(){__p&&__p();var c=[];p.forEach(function(a){var b=a.cb();b.forEach(function(b){var d=a.route;if(d){d=r._wrapData(d,b,r._getEventTime());d.__meta.onSuccess=a.onSuccess;d.__meta.onFailure=a.onFailure;c.push(d)}})});p=[];var d=[],e=[];r._gatherWadsAndPostsFromBuffer(d,e,!0,c);if(d.length>0){d[0].send_method="beacon";d.map(b("BanzaiAdapter").prepWadForTransit);d=new Blob([b("BanzaiAdapter").addRequestAuthData(b("BanzaiAdapter").prepForTransit(d))],{type:"application/x-www-form-urlencoded"});d=a.navigator.sendBeacon(r.adapter.endpoint,d);d?e.forEach(function(a){return a.__meta&&a.__meta.onSuccess&&a.__meta.onSuccess()}):e.forEach(function(a){return a.__meta&&a.__meta.onFailure&&a.__meta.onFailure()})}},_unload:function(){navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon()&&r._processCallbacksAndSendViaBeacon(),b("BanzaiAdapter").cleanup(),b("BanzaiAdapter").inform(b("BanzaiConsts").SHUTDOWN),n.length>0&&((!r.adapter.useBeacon||!r._tryToSendViaBeacon())&&r._store(!1))},_getEventTime:function(){return Date.now()},_testState:function(){return{postBuffer:n,triggerRoute:o}},_getStorage:function(){return{store:function(){},restore:function(){},flush:function(){}}},_getPageId:function(){return"0"},_getUserId:function(){return"0"},_initialize:function(){}};e.exports=r}),null);
__d("BanzaiNew",["BanzaiBase","BanzaiConsts","BanzaiStreamPayloads","CurrentUser","ExecutionEnvironment","FBJSON","NavigationMetrics","SetIdleTimeoutAcrossTransitions","TimeSlice","Visibility","WebStorage","emptyFunction","isInIframe","lowerFacebookDomain","pageID","performanceAbsoluteNow","WebStorageMutex"],(function(a,b,c,d,e,f){__p&&__p();var g="bz:",h={_getStorage:b("BanzaiBase")._getStorage,_getPageId:b("BanzaiBase")._getPageId,_getUserId:b("BanzaiBase")._getUserId,_initialize:b("BanzaiBase")._initialize,_schedule:b("BanzaiBase")._schedule,flush:b("BanzaiBase").flush,_unload:b("BanzaiBase")._unload,post:b("BanzaiBase").post},i=b("isInIframe")(),j=null,k,l,m,n,o=!1;function p(){o||(o=!0,n=b("WebStorage").getLocalStorage());return n}function q(){var a="check_quota";try{var b=p();if(!b)return!1;b.setItem(a,a);b.removeItem(a);return!0}catch(a){return!1}}b("BanzaiBase")._getStorage=function(){__p&&__p();m||(!i?m={store:function(){var a=p();if(!a||b("BanzaiBase")._getPostBuffer().length<=0)return;var c=b("BanzaiBase")._getPostBuffer().map(function(a){return[a[0],a[1],a[2],a[3]||0,a.__meta]});b("BanzaiBase")._clearPostBuffer();b("WebStorage").setItemGuarded(a,g+b("pageID")+"."+b("BanzaiBase")._getEventTime(),b("FBJSON").stringify(c))},restore:function(){__p&&__p();var a=p();if(!a)return;var c=b("WebStorageMutex"),d=function(c){__p&&__p();var d=[];for(var e=0;e<a.length;e++){var f=a.key(e);f.indexOf(g)===0&&f.indexOf("bz:__")!==0&&d.push(f)}d.forEach(function(c){__p&&__p();var d=a.getItem(c);a.removeItem(c);if(!d)return;c=b("FBJSON").parse(d);c.forEach(function(a){if(!a)return;var c=a.__meta=a.pop(),d=b("BanzaiBase")._canSend(a);if(!d)return;d=b("CurrentUser").getID();(c.userID===d||d==="0")&&(b("BanzaiBase")._resetPostStatus(a),b("BanzaiBase")._getPostBuffer().push(a))})});c&&c.unlock()};q()?new c("banzai").lock(d):b("SetIdleTimeoutAcrossTransitions").start(d,0)},flush:function(){var a=p();if(a){j===null&&(j=parseInt(a.getItem(b("BanzaiConsts").LAST_STORAGE_FLUSH),10));var c=j&&b("performanceAbsoluteNow")()-j>=b("BanzaiConsts").STORAGE_FLUSH_INTERVAL;c&&b("BanzaiBase")._restore(!1);(c||!j)&&(j=b("performanceAbsoluteNow")(),b("WebStorage").setItemGuarded(a,b("BanzaiConsts").LAST_STORAGE_FLUSH,j.toString()))}}}:m={store:b("emptyFunction"),restore:b("emptyFunction"),flush:b("emptyFunction")});return m};b("BanzaiBase")._getPageId=function(){return b("pageID")};b("BanzaiBase")._getUserId=function(){return b("CurrentUser").getID()};b("BanzaiBase")._initialize=function(){b("ExecutionEnvironment").canUseDOM&&(b("BanzaiBase").adapter.useBeacon&&b("Visibility").isSupported()?(b("Visibility").addListener(b("Visibility").HIDDEN,function(){b("BanzaiBase")._getPostBuffer().length>0&&(b("BanzaiBase")._tryToSendViaBeacon()||b("BanzaiBase")._store(!1))}),b("BanzaiBase").isEnabled("enable_client_logging_clear_on_visible")&&b("Visibility").addListener(b("Visibility").VISIBLE,function(){b("BanzaiBase")._tryToSendViaBeacon()||b("BanzaiBase")._restore(!1)})):b("BanzaiBase").adapter.setHooks(b("BanzaiBase")),b("BanzaiBase").adapter.setUnloadHook(b("BanzaiBase")),b("NavigationMetrics").addListener(b("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){if(c.pageType!=="normal")return;b("BanzaiBase")._restore(!1);b("NavigationMetrics").removeCurrentListener()}))};b("BanzaiBase")._getEventTime=function(){return b("performanceAbsoluteNow")()};var r=b("TimeSlice").guard(function(){k=null,b("BanzaiBase")._sendWithCallbacks()},"Banzai.send",{propagationType:b("TimeSlice").PropagationType.ORPHAN});b("BanzaiBase")._schedule=function(a){__p&&__p();var c=b("BanzaiBase")._getEventTime()+a;if(!k||c<k){k=c;b("SetIdleTimeoutAcrossTransitions").clear(l);c=function(){l=b("SetIdleTimeoutAcrossTransitions").start(r,a)};c();return!0}return!1};b("BanzaiBase").flush=function(a,c){b("SetIdleTimeoutAcrossTransitions").clear(l),k=null,b("BanzaiBase")._sendWithCallbacks(a,c)};b("BanzaiBase")._unload=function(){b("BanzaiStreamPayloads").unload(b("BanzaiBase").post),h._unload()};b("BanzaiBase").post=function(c,d,e){__p&&__p();if(b("BanzaiBase").adapter.config.disabled)return;if(!b("ExecutionEnvironment").canUseDOM)return;if(i&&b("lowerFacebookDomain").isValidDocumentDomain()){var f;try{f=a.top.require("Banzai")}catch(a){f=null}if(f){f.post.apply(f,arguments);return}}h.post(c,d,e)};b("BanzaiBase")._initialize();e.exports=b("BanzaiBase")}),null);
__d("FalcoBanzaiPostFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SAMPLING_RATE:"r",EXTRA_DATA:"e"})}),null);
__d("FalcoLoggerInternal",["Banzai","FalcoBanzaiPostFields","FalcoJSLoggerSamplingPolicies"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="falco:";function h(a){return a!==0&&Math.random()*a<1}function i(a,c,d,e){if(h(c)){b("Banzai").post(g+a,(a={},a[b("FalcoBanzaiPostFields").EXTRA_DATA]=d(),a[b("FalcoBanzaiPostFields").SAMPLING_RATE]=c,a),e)}}e.exports={create:function(a){var c=b("FalcoJSLoggerSamplingPolicies").rates[a]||0;return{log:function(d){i(a,c,d,b("Banzai").BASIC)},logImmediately:function(d){i(a,c,d,b("Banzai").VITAL)}}}}}),null);
__d("str2rstr",[],(function(a,b,c,d,e,f){function a(a){var b="",c,d;for(var e=0;e<a.length;e++)c=a.charCodeAt(e),d=e+1<a.length?a.charCodeAt(e+1):0,55296<=c&&c<=56319&&56320<=d&&d<=57343&&(c=65536+((c&1023)<<10)+(d&1023),e++),c<=127?b+=String.fromCharCode(c):c<=2047?b+=String.fromCharCode(192|c>>>6&31,128|c&63):c<=65535?b+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|c&63):c<=2097151&&(b+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|c&63));return b}e.exports=a}),null);